(function(){var i=function(i,t){return function(){return i.apply(t,arguments)}};window.RailsShifter=function(){function t(t){this.ref=t,this.onResize=i(this.onResize,this),this.onScroll=i(this.onScroll,this),this.onImageLoaded=i(this.onImageLoaded,this),this.rail_1=this.ref.find(".rail-1"),this.rail_2=this.ref.find(".rail-2"),this.rail_1_el=this.rail_1.find(".creative-vision"),this.rail_2_el=this.rail_2.find(".the-designer"),this.images=this.ref.find("img"),this.images_tot=this.images.length,this.images_loaded=0,this.top=this.rail_1.offset().top,this.is_enabled=!1,this.rail_1.addClass("shifter"),this.preloadImages()}return t.prototype.preloadImages=function(){var i,t,e,s,a,r,o;for(event_emitter.addListener("IMAGE_LOADED",this.onImageLoaded),o=[],i=a=0,r=this.images_tot;r>=0?r>a:a>r;i=r>=0?++a:--a)t=$(this.images[i]),s=t.attr("src"),e=new Image,e.onload=this.onImageLoaded,o.push(e.src=s);return o},t.prototype.onImageLoaded=function(){return this.images_loaded++,this.images_loaded===this.images_tot?(this.resetBreakpoints(),this.is_enabled=!0):void 0},t.prototype.resetBreakpoints=function(){return this.breakpoint_1=this.rail_2_el.offset().top+.5*this.rail_2_el.height(),this.breakpoint_2=this.rail_1_el.offset().top-window.small_header_height,this.acc=this.breakpoint_2/(this.breakpoint_2-this.breakpoint_1)},t.prototype.onScroll=function(i){if(this.is_enabled)if(i>this.breakpoint_1){if(this.rail_1.hasClass("more-affracchievole")||this.rail_1.addClass("more-affracchievole"),this.breakpoint_2>i)return this.rail_1.css({top:""+(i-this.acc*(i-this.breakpoint_1))+"px"})}else if(this.rail_1.hasClass("more-affracchievole"))return this.rail_1.removeClass("more-affracchievole"),this.rail_1.css({top:""+this.top+"px"})},t.prototype.onResize=function(){return this.is_enabled?this.resetBreakpoints():void 0},t}()}).call(this);
