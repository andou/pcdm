// Generated by CoffeeScript 1.6.3
(function() {
  if (!window.console) {
    window.console = {
      log: (function(obj) {})
    };
  }

  $(function() {
    var accordion, accordion_ref, back_to_top, body_simulator_ref, btt_ref, carousel, carousel_ref, cnt, collection, columnist, columnist_ref, even_child, even_children, even_children_container, filtered_grid, filtered_grid_ref, fourth_child, fourth_children, fourth_children_container, header_menu, header_menu_ref, i, ie_mediaquery, j, last_child, last_child_container, mobile_menu, newsletter, onWindowResize, onWindowScroll, overlay_ref, phablet_breakpoint, product_details_ref, product_grid_ref, rails_shifter, rails_shifter_ref, sharing_modules, smartphone_breakpoint, vertical_fixed_menu, vfm_ref, video_list_ref, video_manager, window_ref, _i, _j, _k, _l, _len, _len1, _len2, _m, _n, _o, _p, _ref, _ref1, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7,
      _this = this;
    window_ref = $(window);
    window.is_ie = $.browser.msie;
    window.is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
    window.is_mobile = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/Android/i) ? true : false;
    window.is_iphone = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) ? true : false;
    window.is_ipad = navigator.userAgent.match(/iPad/i) ? true : false;
    window.is_android = navigator.userAgent.match(/Android/i) ? true : false;
    phablet_breakpoint = 960;
    smartphone_breakpoint = 560;
    window.is_phablet = is_mobile && (window.screen.width < phablet_breakpoint);
    window.is_smartphone = is_mobile && (window.screen.width < smartphone_breakpoint);
    window.event_emitter = new EventEmitter();
    if (is_ie && $.browser.version < 9) {
      ie_mediaquery = new IEMediaquery();
    }
    window.small_header_height = 120;
    header_menu_ref = $('.header');
    if (header_menu_ref.length === 1) {
      header_menu = new HeaderMenu(header_menu_ref);
    }
    body_simulator_ref = $('#body-simulator');
    if (body_simulator_ref.length === 1) {
      mobile_menu = new MobileMenu(body_simulator_ref);
    }
    product_grid_ref = $('.wrap-product-grid');
    product_details_ref = $('.product-detail');
    if (product_details_ref.length === 1 && product_details_ref.length === 1) {
      collection = new Collection(product_grid_ref, product_details_ref);
    }
    if (!is_mobile) {
      if (window_ref.width() > 1120) {
        rails_shifter_ref = $('.js-rails-shifter');
        if (rails_shifter_ref.length === 1) {
          rails_shifter = new RailsShifter(rails_shifter_ref);
        }
      }
    }
    _ref = $('.wrap-carousel');
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      carousel = _ref[_i];
      carousel_ref = $(carousel);
      new CarouselFull(carousel_ref);
    }
    filtered_grid_ref = $('.js-filtered-grid');
    if (filtered_grid_ref.length === 1) {
      filtered_grid = new FilteredGrid(filtered_grid_ref);
    }
    if (is_ie && $.browser.version < 9) {
      _ref1 = $('.js-last-child');
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        last_child_container = _ref1[_j];
        last_child = $(last_child_container).children().last();
        last_child.addClass('last-child');
      }
      fourth_children_container = $('.js-fourth-children');
      if (fourth_children_container.length > 0) {
        for (i = _k = 0, _ref2 = fourth_children_container.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; i = 0 <= _ref2 ? ++_k : --_k) {
          fourth_children = $(fourth_children_container[i]).children();
          for (j = _l = 0, _ref3 = fourth_children.length; 0 <= _ref3 ? _l < _ref3 : _l > _ref3; j = 0 <= _ref3 ? ++_l : --_l) {
            if ((j + 1) % 4 === 0) {
              fourth_child = $(fourth_children[j]);
              fourth_child.addClass('fourth-child');
            }
          }
        }
      }
    }
    even_children_container = $('.js-even-children');
    if (even_children_container.length > 0) {
      for (i = _m = 0, _ref4 = even_children_container.length; 0 <= _ref4 ? _m < _ref4 : _m > _ref4; i = 0 <= _ref4 ? ++_m : --_m) {
        even_children = $(even_children_container[i]).children();
        cnt = 0;
        for (j = _n = 0, _ref5 = even_children.length; 0 <= _ref5 ? _n < _ref5 : _n > _ref5; j = 0 <= _ref5 ? ++_n : --_n) {
          even_child = $(even_children[j]);
          if (!even_child.hasClass('empty')) {
            if (cnt % 2 === 1) {
              even_child.addClass('even-child');
            }
            cnt++;
          }
        }
      }
    }
    columnist_ref = $('.js-columnist');
    if (columnist_ref.length === 1) {
      columnist = new Columnist(columnist_ref);
    }
    _ref6 = $('.accordion');
    for (_o = 0, _len2 = _ref6.length; _o < _len2; _o++) {
      accordion = _ref6[_o];
      accordion_ref = $(accordion);
      new Accordion(accordion_ref);
    }
    video_list_ref = $('.video-list');
    if (video_list_ref.length === 1) {
      video_manager = new VideoManager(video_list_ref);
    }
    overlay_ref = $('.wrap-overlay');
    if (overlay_ref.length === 1) {
      newsletter = overlay_ref.find('.newsletter');
      if (newsletter.length === 1) {
        new Newsletter(newsletter);
      }
      $('.footer a.subscribe').bind('click', (function(e) {
        e.preventDefault();
        return overlay_ref.show();
      }));
      overlay_ref.find('.close').bind('click', (function(e) {
        e.preventDefault();
        return overlay_ref.hide();
      }));
    }
    vfm_ref = $('.js-vertical-fixed-menu');
    if (vfm_ref.length === 1) {
      vertical_fixed_menu = new VerticalFixedMenu(vfm_ref);
    }
    btt_ref = $('.back-to-top');
    if (btt_ref.length === 1) {
      back_to_top = new BackToTop(btt_ref);
    }
    sharing_modules = $('.js-sharing');
    if (sharing_modules.length > 0) {
      for (i = _p = 0, _ref7 = sharing_modules.length; 0 <= _ref7 ? _p < _ref7 : _p > _ref7; i = 0 <= _ref7 ? ++_p : --_p) {
        if (!$(sharing_modules[i]).hasClass('link')) {
          new SocialSharing($(sharing_modules[i]));
        }
      }
    }
    onWindowScroll = function() {
      var val;
      val = window_ref.scrollTop();
      if (header_menu != null) {
        header_menu.onScroll(val);
      }
      if (rails_shifter != null) {
        rails_shifter.onScroll(val);
      }
      if (vertical_fixed_menu != null) {
        vertical_fixed_menu.onScroll(val);
      }
      if (back_to_top != null) {
        return back_to_top.onScroll(val);
      }
    };
    window_ref.scroll(onWindowScroll);
    onWindowResize = function() {
      var window_h, window_w;
      window_w = window_ref.width();
      window_h = window_ref.height();
      if (rails_shifter != null) {
        rails_shifter.onResize();
      }
      if (collection != null) {
        collection.onResize(window_w, window_h);
      }
      if (columnist != null) {
        columnist.onResize(window_w, window_h);
      }
      if (ie_mediaquery != null) {
        ie_mediaquery.onResize(window_w);
      }
      if (overlay_ref != null) {
        overlay_ref.height($(document).height());
      }
      if (back_to_top != null) {
        return back_to_top.onResize(window_h);
      }
    };
    window_ref.resize(onWindowResize);
    return onWindowResize();
  });

}).call(this);
