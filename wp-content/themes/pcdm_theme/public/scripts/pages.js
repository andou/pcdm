// Generated by CoffeeScript 1.6.3
(function() {
  if (!window.console) {
    window.console = {
      log: (function(obj) {})
    };
  }

  $(function() {
    var body_simulator_ref, collection, columnist, columnist_ref, even_child, even_children, even_children_container, filtered_grid, filtered_grid_ref, header_menu, header_menu_ref, i, last_child, last_child_container, mobile_menu, newsletter, onWindowResize, onWindowScroll, overlay_ref, product_details_ref, product_grid_ref, rails_shifter, rails_shifter_ref, sharing_modules, smartphone_breakpoint, video_list_ref, video_manager, window_ref, _i, _j, _k, _len, _ref, _ref1, _ref2,
      _this = this;
    window_ref = $(window);
    window.is_ie = $.browser.msie;
    window.is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
    window.is_mobile = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/Android/i) ? true : false;
    window.is_iphone = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) ? true : false;
    window.is_ipad = navigator.userAgent.match(/iPad/i) ? true : false;
    window.is_android = navigator.userAgent.match(/Android/i) ? true : false;
    smartphone_breakpoint = 560;
    window.is_smartphone = is_mobile && (window.screen.width < smartphone_breakpoint);
    window.event_emitter = new EventEmitter();
    window.small_header_height = 120;
    header_menu_ref = $('.header');
    if (header_menu_ref.length === 1) {
      header_menu = new HeaderMenu(header_menu_ref);
    }
    body_simulator_ref = $('#body-simulator');
    if (body_simulator_ref.length === 1) {
      mobile_menu = new MobileMenu(body_simulator_ref);
    }
    product_grid_ref = $('.wrap-product-grid');
    product_details_ref = $('.product-detail');
    if (product_details_ref.length === 1 && product_details_ref.length === 1) {
      collection = new Collection(product_grid_ref, product_details_ref);
    }
    if (!is_mobile) {
      rails_shifter_ref = $('.js-rails-shifter');
      if (rails_shifter_ref.length === 1) {
        rails_shifter = new RailsShifter(rails_shifter_ref);
      }
    }
    filtered_grid_ref = $('.js-filtered-grid');
    if (filtered_grid_ref.length === 1) {
      filtered_grid = new FilteredGrid(filtered_grid_ref);
    }
    if (is_ie && $.browser.version < 9) {
      _ref = $('.js-last-child');
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        last_child_container = _ref[_i];
        last_child = $(last_child_container).children().last();
        last_child.addClass('last-child');
      }
      even_children_container = $('.js-even-children');
      if (even_children_container.length === 1) {
        even_children = even_children_container.children();
        for (i = _j = 0, _ref1 = even_children.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {
          if (i % 2 === 1) {
            even_child = $(even_children[i]);
            even_child.addClass('even-child');
          }
        }
      }
    }
    columnist_ref = $('.js-columnist');
    if (columnist_ref.length === 1) {
      columnist = new Columnist(columnist_ref);
    }
    video_list_ref = $('.video-list');
    if (video_list_ref.length === 1) {
      video_manager = new VideoManager(video_list_ref);
    }
    overlay_ref = $('.wrap-overlay');
    if (overlay_ref.length === 1) {
      newsletter = overlay_ref.find('.newsletter');
      if (newsletter.length === 1) {
        new Newsletter(newsletter);
      }
      $('.footer a.subscribe').bind('click', (function(e) {
        e.preventDefault();
        return overlay_ref.show();
      }));
      overlay_ref.find('.close').bind('click', (function(e) {
        e.preventDefault();
        return overlay_ref.hide();
      }));
    }
    sharing_modules = $('.js-sharing');
    if (sharing_modules.length > 0) {
      for (i = _k = 0, _ref2 = sharing_modules.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; i = 0 <= _ref2 ? ++_k : --_k) {
        if (!$(sharing_modules[i]).hasClass('link')) {
          new SocialSharing($(sharing_modules[i]));
        }
      }
    }
    onWindowScroll = function() {
      var val;
      val = window_ref.scrollTop();
      if (header_menu != null) {
        header_menu.onScroll(val);
      }
      if (rails_shifter != null) {
        return rails_shifter.onScroll(val);
      }
    };
    window_ref.scroll(onWindowScroll);
    onWindowResize = function() {
      var window_h, window_w;
      window_w = window_ref.width();
      window_h = window_ref.height();
      if (rails_shifter != null) {
        rails_shifter.onResize();
      }
      if (collection != null) {
        collection.onResize(window_w, window_h);
      }
      if (columnist != null) {
        return columnist.onResize(window_w, window_h);
      }
    };
    window_ref.resize(onWindowResize);
    return onWindowResize();
  });

}).call(this);
