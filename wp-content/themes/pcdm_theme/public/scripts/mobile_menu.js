// Generated by CoffeeScript 1.6.3
(function() {
  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  window.MobileMenu = (function() {
    function MobileMenu(ref) {
      this.ref = ref;
      this.closeAux = __bind(this.closeAux, this);
      this.openAux = __bind(this.openAux, this);
      this.onSwitch = __bind(this.onSwitch, this);
      this.onSidebarSwipe = __bind(this.onSidebarSwipe, this);
      this.onHeaderSwipe = __bind(this.onHeaderSwipe, this);
      this.w = $(window);
      this.aux = this.ref.find('.aux-body-simulator');
      this.sidebar = this.ref.find('#mobile-sidebar');
      this.header = this.ref.find('.header >.fixed-mobile');
      this["switch"] = this.header.find('.open-nav');
      this.dur = 1;
      this.is_enabled = true;
      this.setInteractions();
    }

    MobileMenu.prototype.setInteractions = function() {
      this["switch"].bind('click', this.onSwitch);
      this.header.swipe({
        swipe: this.onHeaderSwipe,
        threshold: 150,
        allowPageScroll: 'vertical'
      });
      return this.sidebar.swipe({
        swipe: this.onSidebarSwipe,
        threshold: 150,
        allowPageScroll: 'vertical'
      });
    };

    MobileMenu.prototype.onHeaderSwipe = function(e, dir) {
      if (dir === 'right') {
        return this.onSwitch();
      }
    };

    MobileMenu.prototype.onSidebarSwipe = function(e, dir) {
      if (dir === 'left') {
        return this.onSwitch();
      }
    };

    MobileMenu.prototype.onSwitch = function(e) {
      if (e != null) {
        e.preventDefault();
      }
      if (this.is_enabled) {
        this.is_enabled = false;
        if (this.aux.hasClass('sidebar-open')) {
          return this.closeAux();
        } else {
          if (this.w.scrollTop() > 0) {
            return TweenLite.to(window, this.dur, {
              scrollTo: {
                y: 0
              },
              ease: Power4.easeInOut,
              onComplete: this.openAux
            });
          } else {
            return this.openAux();
          }
        }
      }
    };

    MobileMenu.prototype.openAux = function() {
      var _this = this;
      this.aux.addClass('sidebar-open');
      return TweenLite.to(this.aux, this.dur, {
        css: {
          'left': '0'
        },
        ease: Power4.easeInOut,
        onComplete: (function() {
          return _this.is_enabled = true;
        })
      });
    };

    MobileMenu.prototype.closeAux = function() {
      var _this = this;
      return TweenLite.to(this.aux, this.dur, {
        css: {
          'left': '-90%'
        },
        ease: Power4.easeInOut,
        onComplete: (function() {
          _this.aux.removeClass('sidebar-open');
          return _this.is_enabled = true;
        })
      });
    };

    return MobileMenu;

  })();

}).call(this);
