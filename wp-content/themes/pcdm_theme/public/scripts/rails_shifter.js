// Generated by CoffeeScript 1.6.3
(function() {
  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  window.RailsShifter = (function() {
    function RailsShifter(ref) {
      this.ref = ref;
      this.onResize = __bind(this.onResize, this);
      this.onScroll = __bind(this.onScroll, this);
      this.rail_1 = this.ref.find('.rail-1');
      this.rail_2 = this.ref.find('.rail-2');
      this.rail_1_el = this.rail_1.find('.creative-vision');
      this.rail_2_el = this.rail_2.find('.the-designer');
      this.top = this.rail_1.offset().top;
      this.resetBreakpoints();
    }

    RailsShifter.prototype.resetBreakpoints = function() {
      this.breakpoint_1 = this.rail_2_el.offset().top + .5 * this.rail_2_el.height();
      this.breakpoint_2 = this.rail_1_el.offset().top - window.small_header_height;
      return this.acc = this.breakpoint_2 / (this.breakpoint_2 - this.breakpoint_1);
    };

    RailsShifter.prototype.onScroll = function(val) {
      if (val > this.breakpoint_1) {
        if (!this.rail_1.hasClass('more-affracchievole')) {
          this.rail_1.addClass('more-affracchievole');
        }
        if (val < this.breakpoint_2) {
          return this.rail_1.css({
            top: "" + (val - this.acc * (val - this.breakpoint_1)) + "px"
          });
        }
      } else {
        if (this.rail_1.hasClass('more-affracchievole')) {
          this.rail_1.removeClass('more-affracchievole');
          return this.rail_1.css({
            top: "" + this.top + "px"
          });
        }
      }
    };

    RailsShifter.prototype.onResize = function() {
      return this.resetBreakpoints();
    };

    return RailsShifter;

  })();

}).call(this);
